<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="Zicun Hang"><title>Pass an array by reference in C++ · Kousz's blog</title><meta name="description" content="If you try it just like this:
1void foo(double&amp;amp; *arr)
Seems it doesn’t work.
Arrays can only be passed by reference, actually:
1234void foo(double"><meta name="keywords"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/logo@2x.png" style="width:127px;"><br><br><h3 title=""><a href="/">Kousz's blog</a></h3><div class="description"><p>分享学习心得，分享生活的灵感与体会。</p></div></div></div><ul class="social-links"></ul><div class="footer"><a target="_blank"><span>Author: Zicun Hang </span></a><span></span><div class="by_farbox"><a href="https://github.com/Kousz" target="_blank">Github page</a></div></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">首页</a></li><li><a href="/about">关于</a></li><li><a href="/archives">归档</a></li></div><div class="information"><div class="back_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"> </a></li></div><div class="avatar"><img src="http://ogvucbt7e.bkt.clouddn.com/a.jpg"></div></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>Pass an array by reference in C++</a></h3></div><div class="post-content"><p>If you try it just like this:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">foo</span><span class="params">(<span class="keyword">double</span>&amp; *arr)</span></span></span><br></pre></td></tr></table></figure>
<p>Seems it doesn’t work.</p>
<p><strong>Arrays can only be passed by reference, actually:</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">void foo(double (&amp;arr)[10])</span><br><span class="line">&#123;</span><br><span class="line">  <span class="comment">// Example</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>or</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">void foo(double (&amp;arr)[])</span><br><span class="line">&#123;</span><br><span class="line">  <span class="comment">// Example</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><em>(Be aware that when matching, double [10] and double [] are different types. If you have an array of an unknown dimension, it will match the second, but not the first, and if you have an array with 10 elements, it will match the first but not the second. )</em></p>
<p>This prevents you from doing things like:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">double</span> arr[<span class="number">20</span>];</span><br><span class="line">foo(arr); <span class="comment">// won't compile</span></span><br></pre></td></tr></table></figure>
<p>To be able to pass an arbitrary size array to foo, make it a template and capture the size of the array at compile time:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T, <span class="keyword">size_t</span> N&gt;</span><br><span class="line">void foo(T (&amp;bar)[N])</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// use N here</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>You should seriously consider using <code>std::vector</code>, or if you have a compiler that supports C++11, <code>std::array.</code></strong></p>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2016-11-24</span><i class="fa fa-tag"></i><a class="tag" href="/tags/Cpp/" title="Cpp">Cpp </a></div></div></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a class="btn" role="navigation" href="/2017/04/18/servletFilter/" title="Filter the html special characters by servlet">上一篇</a></li><li class="next pagbuttons"><a class="btn" role="navigation" href="/2016/11/20/Hanoi/" title="Hanoi">下一篇</a></li></ul></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script></body></html>